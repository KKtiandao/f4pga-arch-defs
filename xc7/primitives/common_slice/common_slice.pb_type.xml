<!-- A diagram for the SLICEL is shown in;
    7 Series FPGAs CLB User Guide UG474 (v1.8) September 27, 2016
    Figure 2-4: Diagram of SLICEL

    COMMON_SLICE is the common wiring between SLICEL and SLICEM.

    Note: For SLICEL, the AMC31 input is left unconnected.
  -->
<pb_type name="COMMON_SLICE" num_pb="1" xmlns:xi="http://www.w3.org/2001/XInclude">

  <input name="DX" num_pins="1"/>
  <input name="CX" num_pins="1"/>
  <input name="BX" num_pins="1"/>
  <input name="AX" num_pins="1"/>

  <input name="DO6" num_pins="1"/>
  <input name="CO6" num_pins="1"/>
  <input name="BO6" num_pins="1"/>
  <input name="AO6" num_pins="1"/>

  <input name="DO5" num_pins="1"/>
  <input name="CO5" num_pins="1"/>
  <input name="BO5" num_pins="1"/>
  <input name="AO5" num_pins="1"/>

  <input name="SR" num_pins="1"/>
  <input name="CE" num_pins="1"/>

  <input name="F7AMUX_O" num_pins="1"/>
  <input name="F7BMUX_O" num_pins="1"/>
  <input name="F8MUX_O" num_pins="1"/>

  <!-- This input in unconnected on SLICEL -->
  <input name="AMC31" num_pins="1"/>

  <clock name="CLK" num_pins="1"/>

  <input  name="CIN"  num_pins="1"/>
  <output name="COUT" num_pins="1"/>

  <output name="DMUX" num_pins="1"/>
  <output name="D"    num_pins="1"/>
  <output name="DQ"   num_pins="1"/>

  <output name="CMUX" num_pins="1"/>
  <output name="C"    num_pins="1"/>
  <output name="CQ"   num_pins="1"/>

  <output name="BMUX" num_pins="1"/>
  <output name="B"    num_pins="1"/>
  <output name="BQ"   num_pins="1"/>

  <output name="AMUX" num_pins="1"/>
  <output name="A"    num_pins="1"/>
  <output name="AQ"   num_pins="1"/>


  <xi:include href="../ff/ff.pb_type.xml" />

  <!-- CARRY4 logic -->
  <xi:include href="carry/carry0.pb_type.xml" />

  <pb_type name="CEUSEDMUX" num_pb="1" >
    <input name="CE" num_pins="1" />
    <output name="CE_OUT" num_pins="8" />

    <mode name="CE_VCC">
      <pb_type name="CE_VCC" blif_model=".subckt CE_VCC" num_pb="8" >
        <output name="VCC" num_pins="1" />
      </pb_type>
      <interconnect>
        <direct name="CE0" input="CE_VCC[0].VCC" output="CEUSEDMUX.CE_OUT[0]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[0].VCC" out_port="CEUSEDMUX.CE_OUT[0]"/>
        </direct>
        <direct name="CE1" input="CE_VCC[1].VCC" output="CEUSEDMUX.CE_OUT[1]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[1].VCC" out_port="CEUSEDMUX.CE_OUT[1]"/>
        </direct>
        <direct name="CE2" input="CE_VCC[2].VCC" output="CEUSEDMUX.CE_OUT[2]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[2].VCC" out_port="CEUSEDMUX.CE_OUT[2]"/>
        </direct>
        <direct name="CE3" input="CE_VCC[3].VCC" output="CEUSEDMUX.CE_OUT[3]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[3].VCC" out_port="CEUSEDMUX.CE_OUT[3]"/>
        </direct>
        <direct name="CE4" input="CE_VCC[4].VCC" output="CEUSEDMUX.CE_OUT[4]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[4].VCC" out_port="CEUSEDMUX.CE_OUT[4]"/>
        </direct>
        <direct name="CE5" input="CE_VCC[5].VCC" output="CEUSEDMUX.CE_OUT[5]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[5].VCC" out_port="CEUSEDMUX.CE_OUT[5]"/>
        </direct>
        <direct name="CE6" input="CE_VCC[6].VCC" output="CEUSEDMUX.CE_OUT[6]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[6].VCC" out_port="CEUSEDMUX.CE_OUT[6]"/>
        </direct>
        <direct name="CE7" input="CE_VCC[7].VCC" output="CEUSEDMUX.CE_OUT[7]" >
          <pack_pattern name="CE_FF_FDRE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
          <pack_pattern name="CE_FF_FDSE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
          <pack_pattern name="CE_FF_FDPE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
          <pack_pattern name="CE_FF_FDCE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="CE_VCC[7].VCC" out_port="CEUSEDMUX.CE_OUT[7]"/>
        </direct>
      </interconnect>
    </mode>
    <mode name="CEUSEDMUX">
      <interconnect>
        <complete name="CE" input="CEUSEDMUX.CE" output="CEUSEDMUX.CE_OUT" />
      </interconnect>
    </mode>
  </pb_type>

  <pb_type name="SRUSEDMUX" num_pb="1">
    <input name="SR" num_pins="1" />
    <output name="SR_OUT" num_pins="8" />


    <mode name="SR_GND">
      <pb_type name="SR_GND" blif_model=".subckt SR_GND" num_pb="8" >
        <output name="GND" num_pins="1" />
      </pb_type>
      <interconnect>
        <direct name="SR0" input="SR_GND[0].GND" output="SRUSEDMUX.SR_OUT[0]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[0].GND" out_port="SRUSEDMUX.SR_OUT[0]"/>
        </direct>
        <direct name="SR1" input="SR_GND[1].GND" output="SRUSEDMUX.SR_OUT[1]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[1].GND" out_port="SRUSEDMUX.SR_OUT[1]"/>
        </direct>
        <direct name="SR2" input="SR_GND[2].GND" output="SRUSEDMUX.SR_OUT[2]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[2].GND" out_port="SRUSEDMUX.SR_OUT[2]"/>
        </direct>
        <direct name="SR3" input="SR_GND[3].GND" output="SRUSEDMUX.SR_OUT[3]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[3].GND" out_port="SRUSEDMUX.SR_OUT[3]"/>
        </direct>
        <direct name="SR4" input="SR_GND[4].GND" output="SRUSEDMUX.SR_OUT[4]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[4].GND" out_port="SRUSEDMUX.SR_OUT[4]"/>
        </direct>
        <direct name="SR5" input="SR_GND[5].GND" output="SRUSEDMUX.SR_OUT[5]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[5].GND" out_port="SRUSEDMUX.SR_OUT[5]"/>
        </direct>
        <direct name="SR6" input="SR_GND[6].GND" output="SRUSEDMUX.SR_OUT[6]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[6].GND" out_port="SRUSEDMUX.SR_OUT[6]"/>
        </direct>
        <direct name="SR7" input="SR_GND[7].GND" output="SRUSEDMUX.SR_OUT[7]" >
          <pack_pattern name="SR_FF_FDSE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDSE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
          <pack_pattern name="SR_FF_FDRE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDRE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
          <pack_pattern name="SR_FF_FDPE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDPE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
          <pack_pattern name="SR_FF_FDCE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
          <pack_pattern name="CESR_FF_FDCE" in_port="SR_GND[7].GND" out_port="SRUSEDMUX.SR_OUT[7]"/>
        </direct>
      </interconnect>
    </mode>
    <mode name="SRUSEDMUX">
      <interconnect>
        <complete name="SR" input="SRUSEDMUX.SR" output="SRUSEDMUX.SR_OUT" />
      </interconnect>
    </mode>
  </pb_type>

  <pb_type name="CARRY" blif_model=".subckt CARRY" num_pb="3">
    <xi:include href="carry/carry.pb_type.xml"
                xpointer="xpointer(pb_type/child::node())" />
  </pb_type>
  <interconnect>
    <!-- 5FF MUXs -->
    <mux name="D5FFMUX" input="COMMON_SLICE.DX COMMON_SLICE.DO5" output="SLICE_FF.D5[3]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.DO5 = D5FFMUX.IN_A
          COMMON_SLICE.DX = D5FFMUX.IN_B
        </meta>
      </metadata>
    </mux>
    <mux name="C5FFMUX" input="COMMON_SLICE.CX COMMON_SLICE.CO5" output="SLICE_FF.D5[2]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.CO5 = C5FFMUX.IN_A
          COMMON_SLICE.CX = C5FFMUX.IN_B
        </meta>
      </metadata>
    </mux>
    <mux name="B5FFMUX" input="COMMON_SLICE.BX COMMON_SLICE.BO5" output="SLICE_FF.D5[1]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.BO5 = B5FFMUX.IN_A
          COMMON_SLICE.BX = B5FFMUX.IN_B
        </meta>
      </metadata>
    </mux>
    <mux name="A5FFMUX" input="COMMON_SLICE.AX COMMON_SLICE.AO5" output="SLICE_FF.D5[0]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.AO5 = A5FFMUX.IN_A
          COMMON_SLICE.AX = A5FFMUX.IN_B
        </meta>
      </metadata>
    </mux>

    <!-- [A-D]MUX -->
    <mux name="DOUTMUX"
      input="COMMON_SLICE.AMC31 SLICE_FF.Q5[3] CARRY[2].O CARRY[2].CO_FABRIC COMMON_SLICE.DO6 COMMON_SLICE.DO5"
      output="COMMON_SLICE.DMUX">
      <metadata>
        <meta name="fasm_mux">
          <!-- TODO: Test that this mux defaults to AMC31 -->
          COMMON_SLICE.AMC31 = NONE
          SLICE_FF.Q5[3] = DOUTMUX.D5Q
          COMMON_SLICE.DO5 = DOUTMUX.O5
          COMMON_SLICE.DO6 = DOUTMUX.O6
          CARRY[2].CO_FABRIC = DOUTMUX.CY
          CARRY[2].O = DOUTMUX.XOR
        </meta>
      </metadata>
    </mux>
    <mux name="COUTMUX"
      input="SLICE_FF.Q5[2] CARRY[1].O CARRY[1].CO_FABRIC COMMON_SLICE.CO6 COMMON_SLICE.CO5 COMMON_SLICE.F7BMUX_O"
      output="COMMON_SLICE.CMUX" >
      <metadata>
        <meta name="fasm_mux">
          SLICE_FF.Q5[2] = COUTMUX.C5Q
          COMMON_SLICE.F7BMUX_O = COUTMUX.F7
          COMMON_SLICE.CO5 = COUTMUX.O5
          COMMON_SLICE.CO6 = COUTMUX.O6
          CARRY[1].CO_FABRIC = COUTMUX.CY
          CARRY[1].O = COUTMUX.XOR
        </meta>
      </metadata>
    </mux>
    <mux name="BOUTMUX"
      input="SLICE_FF.Q5[1] CARRY[0].O CARRY[0].CO_FABRIC COMMON_SLICE.BO6 COMMON_SLICE.BO5 COMMON_SLICE.F8MUX_O"
      output="COMMON_SLICE.BMUX" >
      <metadata>
        <meta name="fasm_mux">
          SLICE_FF.Q5[1] = BOUTMUX.B5Q
          COMMON_SLICE.F8MUX_O = BOUTMUX.F8
          COMMON_SLICE.BO5 = BOUTMUX.O5
          COMMON_SLICE.BO6 = BOUTMUX.O6
          CARRY[0].CO_FABRIC = BOUTMUX.CY
          CARRY[0].O = BOUTMUX.XOR
        </meta>
      </metadata>
    </mux>
    <mux name="AOUTMUX"
      input="SLICE_FF.Q5[0] CARRY0.O CARRY0.CO_FABRIC COMMON_SLICE.AO6 COMMON_SLICE.AO5 COMMON_SLICE.F7AMUX_O"
      output="COMMON_SLICE.AMUX" >
      <metadata>
        <meta name="fasm_mux">
          SLICE_FF.Q5[0] = AOUTMUX.A5Q
          COMMON_SLICE.F7AMUX_O = AOUTMUX.F7
          COMMON_SLICE.AO5 = AOUTMUX.O5
          COMMON_SLICE.AO6 = AOUTMUX.O6
          CARRY0.CO_FABRIC = AOUTMUX.CY
          CARRY0.O = AOUTMUX.XOR
        </meta>
      </metadata>
    </mux>

    <!-- [A-D]FFMUX -->
    <mux name="DFFMUX"
      input="CARRY[2].O CARRY[2].CO_FABRIC COMMON_SLICE.DO6 COMMON_SLICE.DO5 COMMON_SLICE.DX"
      output="SLICE_FF.D[3]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.DX = DFFMUX.DX
          COMMON_SLICE.DO5 = DFFMUX.O5
          COMMON_SLICE.DO6 = DFFMUX.O6
          CARRY[2].CO_FABRIC = DFFMUX.CY
          CARRY[2].O = DFFMUX.XOR
        </meta>
      </metadata>
    </mux>
    <mux name="CFFMUX"
      input="CARRY[1].O CARRY[1].CO_FABRIC COMMON_SLICE.CO6 COMMON_SLICE.CO5 COMMON_SLICE.CX COMMON_SLICE.F7BMUX_O"
      output="SLICE_FF.D[2]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.CX = CFFMUX.CX
          COMMON_SLICE.F7BMUX_O = CFFMUX.F7
          COMMON_SLICE.CO5 = CFFMUX.O5
          COMMON_SLICE.CO6 = CFFMUX.O6
          CARRY[1].CO_FABRIC = CFFMUX.CY
          CARRY[1].O = CFFMUX.XOR
        </meta>
      </metadata>
    </mux>
    <mux name="BFFMUX"
      input="CARRY[0].O CARRY[0].CO_FABRIC COMMON_SLICE.BO6 COMMON_SLICE.BO5 COMMON_SLICE.BX COMMON_SLICE.F8MUX_O"
      output="SLICE_FF.D[1]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.BX = BFFMUX.BX
          COMMON_SLICE.F8MUX_O = BFFMUX.F8
          COMMON_SLICE.BO5 = BFFMUX.O5
          COMMON_SLICE.BO6 = BFFMUX.O6
          CARRY[0].CO_FABRIC = BFFMUX.CY
          CARRY[0].O = BFFMUX.XOR
        </meta>
      </metadata>
    </mux>
    <mux name="AFFMUX"
      input="CARRY0.O CARRY0.CO_FABRIC COMMON_SLICE.AO6 COMMON_SLICE.AO5 COMMON_SLICE.AX COMMON_SLICE.F7AMUX_O"
      output="SLICE_FF.D[0]" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.AX = AFFMUX.AX
          COMMON_SLICE.F7AMUX_O = AFFMUX.F7
          COMMON_SLICE.AO5 = AFFMUX.O5
          COMMON_SLICE.AO6 = AFFMUX.O6
          CARRY0.CO_FABRIC = AFFMUX.CY
          CARRY0.O = AFFMUX.XOR
        </meta>
      </metadata>
    </mux>

    <!-- [A-F]Q outputs -->
    <direct name="AFF" input="SLICE_FF.Q[0]" output="COMMON_SLICE.AQ" />
    <direct name="BFF" input="SLICE_FF.Q[1]" output="COMMON_SLICE.BQ" />
    <direct name="CFF" input="SLICE_FF.Q[2]" output="COMMON_SLICE.CQ" />
    <direct name="DFF" input="SLICE_FF.Q[3]" output="COMMON_SLICE.DQ" />

    <!-- LUT O6 output -->
    <direct name="COMMON_SLICE_DOUT" input="COMMON_SLICE.DO6" output="COMMON_SLICE.D" />
    <direct name="COMMON_SLICE_COUT" input="COMMON_SLICE.CO6" output="COMMON_SLICE.C" />
    <direct name="COMMON_SLICE_BOUT" input="COMMON_SLICE.BO6" output="COMMON_SLICE.B" />
    <direct name="COMMON_SLICE_AOUT" input="COMMON_SLICE.AO6" output="COMMON_SLICE.A" />

    <!-- Carry -->

    <!-- Carry initialization -->
    <direct name="PRECYINIT_MUX"
      input="COMMON_SLICE.AX"
      output="CARRY0.CI_INIT">
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.AX = PRECYINIT.AX
        </meta>
      </metadata>
    </direct>>

    <direct name="CIN_TO_CARRY0" input="COMMON_SLICE.CIN" output="CARRY0.CI" >
      <pack_pattern name="CARRYCHAIN" in_port="COMMON_SLICE.CIN" out_port="CARRY0.CI"/>
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.CIN = PRECYINIT.CIN
        </meta>
      </metadata>
    </direct>

    <!-- Tile internal carry -->
    <direct name="CARRY0_TO_CARRY1"    input="CARRY0.CO_CHAIN"   output="CARRY[0].CI"      >
      <pack_pattern name="CARRYCHAIN" in_port="CARRY0.CO_CHAIN" out_port="CARRY[0].CI"/>
    </direct>
    <direct name="CARRY1_TO_CARRY2"    input="CARRY[0].CO_CHAIN"   output="CARRY[1].CI"      >
      <pack_pattern name="CARRYCHAIN" in_port="CARRY[0].CO_CHAIN" out_port="CARRY[1].CI"/>
    </direct>
    <direct name="CARRY2_TO_CARRY3"    input="CARRY[1].CO_CHAIN"   output="CARRY[2].CI"      >
      <pack_pattern name="CARRYCHAIN" in_port="CARRY[1].CO_CHAIN" out_port="CARRY[2].CI"/>
   </direct>

    <!-- Carry selects -->
    <direct name="CARRY_S3" input="COMMON_SLICE.DO6" output="CARRY[2].S" />
    <direct name="CARRY_S2" input="COMMON_SLICE.CO6" output="CARRY[1].S" />
    <direct name="CARRY_S1" input="COMMON_SLICE.BO6" output="CARRY[0].S" />
    <direct name="CARRY_S0" input="COMMON_SLICE.AO6" output="CARRY0.S" />

    <!-- Carry MUXCY.DI -->
    <mux name="CARRY_DI3" input="COMMON_SLICE.DO5 COMMON_SLICE.DX" output="CARRY[2].DI" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.DO5 = CARRY4.DCY0
          COMMON_SLICE.DX = NULL
        </meta>
      </metadata>
    </mux>
    <mux name="CARRY_DI2" input="COMMON_SLICE.CO5 COMMON_SLICE.CX" output="CARRY[1].DI" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.CO5 = CARRY4.CCY0
          COMMON_SLICE.CX = NULL
        </meta>
      </metadata>
    </mux>
    <mux name="CARRY_DI1" input="COMMON_SLICE.BO5 COMMON_SLICE.BX" output="CARRY[0].DI" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.BO5 = CARRY4.BCY0
          COMMON_SLICE.BX = NULL
        </meta>
      </metadata>
    </mux>
    <mux name="CARRY_DI0" input="COMMON_SLICE.AO5 COMMON_SLICE.AX" output="CARRY0.DI" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.AO5 = CARRY4.ACY0
          COMMON_SLICE.AX = NULL
        </meta>
      </metadata>
    </mux>

    <direct name="COUT" input="CARRY[2].CO_CHAIN" output="COMMON_SLICE.COUT" >
      <pack_pattern name="CARRYCHAIN" in_port="CARRY[2].CO_CHAIN" out_port="COMMON_SLICE.COUT"/>
    </direct>

    <!-- Clock, Clock Enable and Reset -->
    <direct name="CK" input="COMMON_SLICE.CLK" output="SLICE_FF.CK"/>

    <direct name="CE" input="COMMON_SLICE.CE" output="CEUSEDMUX.CE" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.CE = CEUSEDMUX
        </meta>
      </metadata>
    </direct>
    <direct name="CE_OUT"
      input="CEUSEDMUX.CE_OUT"
      output="SLICE_FF.CE"
      />

    <direct name="SR" input="COMMON_SLICE.SR"  output="SRUSEDMUX.SR" >
      <metadata>
        <meta name="fasm_mux">
          COMMON_SLICE.SR = SRUSEDMUX
        </meta>
      </metadata>
    </direct>
    <direct name="SR_OUT"
      input="SRUSEDMUX.SR_OUT"
      output="SLICE_FF.SR"
      />

  </interconnect>
  <metadata>
    <meta name="type">block</meta>
    <meta name="subtype">ignore</meta>
  </metadata>
</pb_type>
